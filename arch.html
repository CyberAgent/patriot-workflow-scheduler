

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Architecture &mdash; patriot-workflow-scheduler 0.8.0 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="patriot-workflow-scheduler 0.8.0 documentation" href="index.html"/>
        <link rel="next" title="Job Configuration DSL (PBC)" href="pbc.html"/>
        <link rel="prev" title="Getting Started" href="getting_started.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> patriot-workflow-scheduler
          

          
          </a>

          
            
            
              <div class="version">
                0.8.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="getting_started.html">Getting Started</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="">Architecture</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#model-of-jobs-and-dependency">Model of jobs and dependency</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="pbc.html">Job Configuration DSL (PBC)</a></li>
<li class="toctree-l1"><a class="reference internal" href="cli.html">CLI tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="web.html">Web Console</a></li>
<li class="toctree-l1"><a class="reference internal" href="rest.html">REST API</a></li>
<li class="toctree-l1"><a class="reference internal" href="config.html">System Configuration</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="index.html">patriot-workflow-scheduler</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          





<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="index.html">Docs</a> &raquo;</li>
      
    <li>Architecture</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/arch.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="architecture">
<h1>Architecture<a class="headerlink" href="#architecture" title="Permalink to this headline">¶</a></h1>
<img alt="_images/arch.png" src="_images/arch.png" />
<p>How jobs are executed with the patriot-workflow-scheduler is described
in the above figure.  The jobs are defined with Patriot Batch Config
(PBC) files in original DSL.  PBC files are parsed by the patriot
script and registered to JobStore.  The JobStore has a role of
determining which jobs are executable by managing dependency.  The
executable jobs are fetched by workers and executed by the workers.</p>
<div class="section" id="model-of-jobs-and-dependency">
<h2>Model of jobs and dependency<a class="headerlink" href="#model-of-jobs-and-dependency" title="Permalink to this headline">¶</a></h2>
<img alt="_images/depmodel.png" src="_images/depmodel.png" />
<p>The job dependency model is shown in the above figure.  The model is
designed on the basis of data flow.  The rounded rectangles and the
rectangles represent jobs and products, respectively.  The products
can be produced and/or required by one or more jobs.  The figure has
two kind of data (data1, data2) which are modeled as products.  The
product data1 and date2 are produced (required) by the job import1
(process1) and import2 (process2), respectively.  In addition, the
figure has a virtual product (&#8216;all data&#8217;) which is produced by the
import1 and the import2 and required by the processAll.  A job is
judged as executable when all products the job requires are available.
A product becomes available when all jobs which produce the product
are successfully finished.</p>
<p>For instance, the process1 becomes executable when the import1 is
finished because the process1 only requires the data1 and it is
produced only by the import1.  On the other hand, both the import1 and
the import2 have to be finished for the processAll.  The processAll
only requires the &#8216;data all&#8217; but it has two producers (import1 and
import2).</p>
<p>The data flow based dependency model can improve modularity of
dependency configuration.  Consider a situation that new data (data3)
which should be processed as all data is added which should be
processed as all data for instance.  The below figure shows this kind
of extension can be achieved by only producer-side modification due to
the existence of the virtual product (&#8216;all data&#8217;).  By setting the
&#8216;all data&#8217; as a product of the import3, the processAll requires
completion of the import3 to become executable.  The patriot workflow
scheduler provides an original Patriot Batch Config DSL (<a class="reference internal" href="pbc.html"><em>PBC</em></a>) to describe the data-flow based dependency model.</p>
<img alt="_images/depmodel2.png" src="_images/depmodel2.png" />
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="pbc.html" class="btn btn-neutral float-right" title="Job Configuration DSL (PBC)" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="getting_started.html" class="btn btn-neutral" title="Getting Started" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2015, Cyberagent, Inc..

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'0.8.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>